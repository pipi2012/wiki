<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/typo.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/reset_typo.css">
    	<link rel="icon" href="http://7xjtfr.com1.z0.glb.clouddn.com/favicon.ico">
        <title>hexo-使用 - Wiki | StarsCount</title>
        <meta name="keywords" content="wiki,starscount,simiki"/>
        <meta name="description" content="the Personal Wiki of StarsCount by Programs"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container" class="typo">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Home</a> » <a href="/#Tool">Tool</a> » hexo-使用
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="title">hexo-使用</div>
    <div id="content">
        <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">环境要求</a></li>
<li><a href="#hexogit-bash">Hexo安装（Git Bash下）</a><ul>
<li><a href="#_2">安装</a></li>
<li><a href="#_3">升级</a></li>
<li><a href="#_4">安装依赖包</a></li>
<li><a href="#_5">示例</a></li>
</ul>
</li>
<li><a href="#hexo">Hexo使用</a><ul>
<li><a href="#_6">初始化</a></li>
<li><a href="#_7">生成网站</a></li>
<li><a href="#_8">启动服务器</a></li>
</ul>
</li>
<li><a href="#about">About页面</a><ul>
<li><a href="#about_1">新建about页面</a></li>
</ul>
</li>
<li><a href="#_9">写文章</a><ul>
<li><a href="#_10">新建文章</a></li>
<li><a href="#layout">layout编辑</a></li>
<li><a href="#postnamemd">postName.md文件说明</a></li>
</ul>
</li>
<li><a href="#git">Git发布</a><ul>
<li><a href="#install-hexo-deployer-git">Install hexo-deployer-git</a></li>
<li><a href="#edit-settings">Edit settings</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#_11">命令</a><ul>
<li><a href="#_12">常用命令</a></li>
<li><a href="#commands">Commands:</a></li>
<li><a href="#_13">复合命令</a></li>
<li><a href="#_14">命令简写</a></li>
</ul>
</li>
<li><a href="#_15">相关问题</a><ul>
<li><a href="#cname">CNAME文件部署问题</a></li>
<li><a href="#_16">分类、文章等删除问题</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="_1">环境要求</h2>
<div class="hlcode"><pre><span class="n">Git</span>
<span class="n">Node</span><span class="p">.</span><span class="n">js</span><span class="err">（</span><span class="n">Windows</span> <span class="err">环境下，仅须下载安装文件并执行即可完成安装）</span>
</pre></div>


<h2 id="hexogit-bash">Hexo安装（Git Bash下）</h2>
<h3 id="_2">安装</h3>
<div class="hlcode"><pre><span class="n">npm</span> <span class="n">install</span> <span class="n">hexo</span> <span class="o">-</span><span class="n">g</span>
<span class="err">或</span>
<span class="n">npm</span> <span class="n">install</span> <span class="o">-</span><span class="n">g</span> <span class="n">hexo</span><span class="o">-</span><span class="n">cli</span><span class="err">（官网）</span>
</pre></div>


<h3 id="_3">升级</h3>
<div class="hlcode"><pre><span class="n">npm</span> <span class="n">update</span> <span class="n">hexo</span> <span class="o">-</span><span class="n">g</span>
</pre></div>


<h3 id="_4">安装依赖包</h3>
<div class="hlcode"><pre><span class="n">npm</span> <span class="n">install</span>
</pre></div>


<h3 id="_5">示例</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">hexo</span> <span class="n">init</span> <span class="n">blog</span>
<span class="err">$</span> <span class="n">cd</span> <span class="n">blog</span>
<span class="err">$</span> <span class="n">npm</span> <span class="n">install</span>
</pre></div>


<h2 id="hexo">Hexo使用</h2>
<h3 id="_6">初始化</h3>
<div class="hlcode"><pre><span class="nx">cd</span> <span class="nx">targetdir</span>
<span class="nx">hexo</span> <span class="nb">init</span>
<span class="err">或</span>
<span class="nx">hexo</span> <span class="nb">init</span> <span class="o">&lt;</span><span class="nx">folder</span><span class="o">&gt;</span>
</pre></div>


<h3 id="_7">生成网站</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">generate</span>
</pre></div>


<h3 id="_8">启动服务器</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">server</span>
<span class="err">访问链接：</span><span class="n">http</span><span class="o">:</span><span class="c1">//localhost:port （port 预设为 4000，可在 _config.yml 设定）</span>
</pre></div>


<h2 id="about">About页面</h2>
<h3 id="about_1">新建about页面</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">new</span> <span class="n">page</span> <span class="s">&quot;about&quot;</span>
<span class="err">菜单显示</span> <span class="n">about</span> <span class="err">链接，在</span> <span class="err">主题配置文件</span> <span class="err">设置中将</span> <span class="n">menu</span> <span class="err">中</span> <span class="n">about</span> <span class="err">前面的注释去掉即可。</span>
<span class="nl">menu:</span>
  <span class="nl">home:</span> <span class="o">/</span>
  <span class="nl">archives:</span> <span class="o">/</span><span class="n">archives</span>
  <span class="nl">tags:</span> <span class="o">/</span><span class="n">tags</span>
  <span class="nl">about:</span> <span class="o">/</span><span class="n">about</span>
</pre></div>


<h2 id="_9">写文章</h2>
<h3 id="_10">新建文章</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">new</span> <span class="p">[</span><span class="n">layout</span><span class="p">]</span> <span class="s">&quot;postName&quot;</span>
<span class="n">layout</span><span class="err">：</span><span class="k">default</span> <span class="n">post</span>
</pre></div>


<h3 id="layout">layout编辑</h3>
<div class="hlcode"><pre><span class="n">layout</span><span class="err">配置文件在</span><span class="n">scaffolds</span><span class="err">目录下，可编辑与新建</span>
<span class="nl">title:</span> <span class="p">{</span> <span class="p">{</span> <span class="n">title</span> <span class="p">}</span> <span class="p">}</span>
<span class="nl">date:</span> <span class="p">{</span> <span class="p">{</span> <span class="n">date</span> <span class="p">}</span> <span class="p">}</span>
<span class="nl">categories:</span>
<span class="nl">tags:</span>
<span class="o">---</span>
</pre></div>


<h3 id="postnamemd">postName.md文件说明</h3>
<div class="hlcode"><pre><span class="n">title</span><span class="o">:</span> <span class="n">postName</span> <span class="err">#文章页面上的显示名称，可以任意修改，不会出现在</span><span class="n">URL</span><span class="err">中</span>
<span class="n">date</span><span class="o">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">02</span> <span class="mi">15</span><span class="o">:</span><span class="mi">30</span><span class="o">:</span><span class="mi">16</span> <span class="err">#文章生成时间，一般不改，当然也可以任意修改</span>
<span class="n">categories</span><span class="o">:</span> <span class="err">#文章分类目录，可以为空，注意</span><span class="o">:</span><span class="err">后面有个空格</span>
<span class="n">tags</span><span class="o">:</span> <span class="err">#文章标签，可空，多标签请用格式</span><span class="o">[</span><span class="n">tag1</span><span class="o">,</span><span class="n">tag2</span><span class="o">,</span><span class="n">tag3</span><span class="o">]</span><span class="err">，注意</span><span class="o">:</span><span class="err">后面有个空格</span>
<span class="o">---</span>
<span class="err">这里开始使用</span><span class="n">markdown</span><span class="err">格式输入你的正文。</span>
</pre></div>


<h2 id="git">Git发布</h2>
<h3 id="install-hexo-deployer-git">Install hexo-deployer-git</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">npm</span> <span class="n">install</span> <span class="n">hexo</span><span class="o">-</span><span class="n">deployer</span><span class="o">-</span><span class="n">git</span> <span class="o">--</span><span class="n">save</span>
</pre></div>


<h3 id="edit-settings">Edit settings</h3>
<div class="hlcode"><pre><span class="cp"># Deployment</span>
<span class="cp">## Docs: http:</span><span class="c1">//hexo.io/docs/deployment.html</span>
<span class="nl">deploy:</span>
  <span class="nl">type:</span> <span class="n">git</span>
  <span class="nl">repo:</span> <span class="o">&lt;</span><span class="n">repository</span> <span class="n">url</span><span class="o">&gt;</span>
  <span class="nl">branch:</span> <span class="p">[</span><span class="n">branch</span><span class="p">]</span>
  <span class="nl">message:</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span>

<span class="n">Option</span>  <span class="n">Description</span>
<span class="n">repo</span>    <span class="n">GitHub</span> <span class="n">repository</span> <span class="n">URL</span>
<span class="n">branch</span>  <span class="n">Branch</span> <span class="n">name</span><span class="p">.</span> <span class="n">The</span> <span class="n">deployer</span> <span class="n">will</span> <span class="n">automatically</span> <span class="n">detect</span> <span class="n">the</span> <span class="n">branch</span> <span class="n">automatically</span> <span class="k">if</span> <span class="n">you</span> <span class="n">are</span> <span class="n">using</span> <span class="n">GitHub</span> <span class="n">or</span> <span class="n">GitCafe</span><span class="p">.</span>
<span class="n">message</span> <span class="n">Customize</span> <span class="n">commit</span> <span class="n">message</span> <span class="p">(</span><span class="n">Default</span> <span class="n">to</span> <span class="n">Site</span> <span class="n">updated</span><span class="o">:</span> <span class="p">{{</span> <span class="n">now</span><span class="p">(</span><span class="s">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span class="p">)</span> <span class="p">}})</span>
</pre></div>


<h3 id="example">Example</h3>
<div class="hlcode"><pre><span class="n">deploy</span><span class="o">:</span>
  <span class="n">type</span><span class="o">:</span> <span class="n">git</span>
  <span class="n">repo</span><span class="o">:</span> <span class="n">git</span><span class="err">@</span><span class="n">github</span><span class="o">.</span><span class="na">com</span><span class="o">:</span><span class="n">pipi2012</span><span class="o">/</span><span class="n">blog</span><span class="o">.</span><span class="na">git</span>
  <span class="n">branch</span><span class="o">:</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
  <span class="n">message</span><span class="o">:</span>
</pre></div>


<h2 id="_11">命令</h2>
<h3 id="_12">常用命令</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">new</span> <span class="s">&quot;postName&quot;</span> <span class="err">#新建文章</span>
<span class="n">hexo</span> <span class="n">new</span> <span class="n">page</span> <span class="s">&quot;pageName&quot;</span> <span class="err">#新建页面</span>
<span class="n">hexo</span> <span class="n">generate</span> <span class="err">#生成静态页面至</span><span class="n">public</span><span class="err">目录</span>
<span class="n">hexo</span> <span class="n">server</span> <span class="err">#开启预览访问端口（默认端口</span><span class="mi">4000</span><span class="err">，&#39;</span><span class="n">ctrl</span> <span class="o">+</span> <span class="n">c</span><span class="err">&#39;关闭</span><span class="n">server</span><span class="err">）</span>
<span class="n">hexo</span> <span class="n">deploy</span> <span class="err">#将</span><span class="p">.</span><span class="n">deploy</span><span class="err">目录部署到</span><span class="n">GitHub</span>
<span class="n">hexo</span> <span class="n">help</span>  <span class="err">#</span> <span class="err">查看帮助</span>
<span class="n">hexo</span> <span class="n">version</span>  <span class="err">#查看</span><span class="n">Hexo</span><span class="err">的版本</span>
<span class="n">hexo</span> <span class="n">clean</span> <span class="err">#清除缓存</span>
</pre></div>


<h3 id="commands">Commands:</h3>
<div class="hlcode"><pre><span class="n">clean</span>     <span class="n">Removed</span> <span class="n">generated</span> <span class="n">files</span> <span class="n">and</span> <span class="n">cache</span><span class="p">.</span>
<span class="n">config</span>    <span class="n">Get</span> <span class="n">or</span> <span class="n">set</span> <span class="n">configurations</span><span class="p">.</span>
<span class="n">deploy</span>    <span class="n">Deploy</span> <span class="n">your</span> <span class="n">website</span><span class="p">.</span>
<span class="n">generate</span>  <span class="n">Generate</span> <span class="k">static</span> <span class="n">files</span><span class="p">.</span>
<span class="n">help</span>      <span class="n">Get</span> <span class="n">help</span> <span class="n">on</span> <span class="n">a</span> <span class="n">command</span><span class="p">.</span>
<span class="n">init</span>      <span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">Hexo</span> <span class="n">folder</span><span class="p">.</span>
<span class="n">list</span>      <span class="n">List</span> <span class="n">the</span> <span class="n">information</span> <span class="n">of</span> <span class="n">the</span> <span class="n">site</span>
<span class="n">migrate</span>   <span class="n">Migrate</span> <span class="n">your</span> <span class="n">site</span> <span class="n">from</span> <span class="n">other</span> <span class="n">system</span> <span class="n">to</span> <span class="n">Hexo</span><span class="p">.</span>
<span class="n">new</span>       <span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">post</span><span class="p">.</span>
<span class="n">publish</span>   <span class="n">Moves</span> <span class="n">a</span> <span class="n">draft</span> <span class="n">post</span> <span class="n">from</span> <span class="n">_drafts</span> <span class="n">to</span> <span class="n">_posts</span> <span class="n">folder</span><span class="p">.</span>
<span class="n">render</span>    <span class="n">Render</span> <span class="n">files</span> <span class="n">with</span> <span class="n">renderer</span> <span class="n">plugins</span><span class="p">.</span>
<span class="n">server</span>    <span class="n">Start</span> <span class="n">the</span> <span class="n">server</span><span class="p">.</span>
<span class="n">version</span>   <span class="n">Display</span> <span class="n">version</span> <span class="n">information</span><span class="p">.</span>
</pre></div>


<h3 id="_13">复合命令</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">deploy</span> <span class="o">-</span><span class="n">g</span>  <span class="err">#生成加部署</span>
<span class="n">hexo</span> <span class="n">server</span> <span class="o">-</span><span class="n">g</span>  <span class="err">#生成加预览</span>
</pre></div>


<h3 id="_14">命令简写</h3>
<div class="hlcode"><pre><span class="n">hexo</span> <span class="n">n</span> <span class="o">==</span> <span class="n">hexo</span> <span class="n">new</span>
<span class="n">hexo</span> <span class="n">g</span> <span class="o">==</span> <span class="n">hexo</span> <span class="n">generate</span>
<span class="n">hexo</span> <span class="n">s</span> <span class="o">==</span> <span class="n">hexo</span> <span class="n">server</span>
<span class="n">hexo</span> <span class="n">d</span> <span class="o">==</span> <span class="n">hexo</span> <span class="n">deploy</span>
</pre></div>


<h2 id="_15">相关问题</h2>
<h3 id="cname">CNAME文件部署问题</h3>
<p>hexo deploy命令，会先清空.deploy文件夹，再将public文件夹生成文件拷贝到.deploy文件夹，导致CNAME文件清除。</p>
<p>解决方法</p>
<p>在部署插件hexo-deployer-git的lib/deployer.js中.找到</p>
<div class="hlcode"><pre><span class="n">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Copying</span> <span class="n">files</span> <span class="n">from</span> <span class="n">public</span> <span class="n">folder</span><span class="p">...</span><span class="err">&#39;</span><span class="p">);</span>
<span class="k">return</span> <span class="n">fs</span><span class="p">.</span><span class="n">copyDir</span><span class="p">(</span><span class="n">publicDir</span><span class="p">,</span> <span class="n">deployDir</span><span class="p">);</span>
</pre></div>


<p>在fs.copyDir上面插入</p>
<div class="hlcode"><pre><span class="n">fs</span><span class="p">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">deployDir</span><span class="o">+</span><span class="err">&#39;</span><span class="o">/</span><span class="n">CNAME</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">blog</span><span class="p">.</span><span class="n">starscount</span><span class="p">.</span><span class="n">com</span><span class="err">&#39;</span><span class="p">);</span>
</pre></div>


<h3 id="_16">分类、文章等删除问题</h3>
<p>删除后如效果为改变，可以先hexo clean一下缓存，然后再生成发布。</p>
<p>------------</p>
<blockquote>
<p>文章修改记录<br />
add time 2016-02-16 14:29</p>
</blockquote>
    </div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 <a href="http://starscount.cn">starscount</a> Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.Theme by <a href="https://github.com/tankywoo/yasimple" target="_blank">YASimple</a>.
            </span>
        </div>
    </body>
</html>